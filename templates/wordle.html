{% extends "base.html" %}
{% block title %}Wordle - Wayne's World{% endblock %}
{% block content %}
<style>
    .container { max-width: 500px; }
    .screen { display: none; }
    .screen.active { display: block; }

    /* Board */
    #board { display: flex; flex-direction: column; align-items: center; gap: 5px; margin: 10px 0; }
    .row { display: flex; gap: 5px; }
    .tile {
        width: 58px; height: 58px; border: 2px solid #3a3a3c;
        display: flex; align-items: center; justify-content: center;
        font-size: 28px; font-weight: bold; text-transform: uppercase;
        color: #fff; box-sizing: border-box; transition: transform 0.1s;
        user-select: none;
    }
    .tile.filled { border-color: #565656; }
    .tile.pop { transform: scale(1.1); }
    .tile.flip { animation: flip 0.5s ease forwards; }
    @keyframes flip {
        0% { transform: rotateX(0); }
        50% { transform: rotateX(90deg); }
        100% { transform: rotateX(0); }
    }
    .tile.correct { background: #538d4e; border-color: #538d4e; }
    .tile.present { background: #b59f3b; border-color: #b59f3b; }
    .tile.absent { background: #3a3a3c; border-color: #3a3a3c; }

    /* Keyboard */
    #keyboard { margin: 10px auto; max-width: 500px; }
    .kb-row { display: flex; justify-content: center; gap: 4px; margin-bottom: 4px; }
    .key {
        padding: 0; height: 50px; min-width: 32px;
        border-radius: 4px; border: none; background: #818384; color: #fff;
        font-size: 13px; font-weight: bold; cursor: pointer;
        display: flex; align-items: center; justify-content: center;
        text-transform: uppercase; flex: 1; max-width: 44px;
        user-select: none; -webkit-tap-highlight-color: transparent;
    }
    .key.wide { max-width: 66px; font-size: 12px; }
    .key:active { opacity: 0.7; }
    .key.correct { background: #538d4e; }
    .key.present { background: #b59f3b; }
    .key.absent { background: #3a3a3c; }

    /* Message toast */
    #message {
        position: fixed; top: 80px; left: 50%; transform: translateX(-50%);
        background: #fff; color: #000; padding: 10px 20px; border-radius: 4px;
        font-weight: bold; font-size: 14px; z-index: 200; display: none;
    }

    /* Summary */
    .emoji-grid { margin: 15px 0; display: inline-flex; flex-direction: column; gap: 4px; align-items: center; }
    .grid-row-summary { display: flex; gap: 4px; }
    .grid-cell { width: 28px; height: 28px; border-radius: 3px; display: inline-block; }
    .grid-cell.correct { background: #538d4e; }
    .grid-cell.present { background: #b59f3b; }
    .grid-cell.absent { background: #3a3a3c; }
    .btn-group { display: flex; flex-wrap: wrap; justify-content: center; gap: 8px; }
    .btn-group .btn { margin: 0; }

    @media (max-width: 480px) {
        .tile { width: 50px; height: 50px; font-size: 24px; }
        .key { height: 45px; font-size: 12px; }
    }
</style>

<!-- Start Screen -->
<div id="start-screen" class="screen active">
    <h1>Wordle</h1>
    <p>Guess the 5-letter word in 6 tries.</p>
    <p style="font-size: 14px; color: #aaa;">
        ðŸŸ© Correct letter & position<br>
        ðŸŸ¨ Correct letter, wrong position<br>
        â¬› Letter not in word
    </p>
    <button class="btn" onclick="startGame()">Play</button>
    <div style="margin-top: 20px;">
        <a href="{% url 'wordle_history' %}" class="btn" style="background: #16213e; border: 1px solid #e94560;">History</a>
    </div>
</div>

<!-- Game Screen -->
<div id="game-screen" class="screen">
    <div id="message"></div>
    <div id="board"></div>
    <div id="keyboard"></div>
</div>

<!-- Summary Screen -->
<div id="summary-screen" class="screen">
    <h1 id="summary-title"></h1>
    <p id="summary-word" style="font-size: 18px;"></p>
    <div id="emoji-grid" class="emoji-grid"></div>
    <div class="btn-group">
        <a href="{% url 'home' %}" class="btn" style="background: #16213e; border: 1px solid #e94560;">Go Home</a>
        <button class="btn" onclick="startGame()">Play Again</button>
        <a href="{% url 'wordle_history' %}" class="btn" style="background: #16213e; border: 1px solid #e94560;">History</a>
    </div>
</div>

<script>
const VALID_GUESSES = new Set([
    "aahed","aalii","aargh","abaca","abaci","aback","abaft","abamp","abase","abash",
    "abate","abbey","abbot","abeam","abele","abets","abhor","abide","abler","ables",
    "abmho","abode","abohm","aboil","abort","about","above","abuse","abuts","abuzz",
    "abyes","abysm","abyss","acari","acerb","aceta","acids","acidy","acing","acini",
    "ackee","acmes","acmic","acned","acnes","acock","acold","acorn","acred","acres",
    "acrid","acted","actin","actor","acute","acyls","adage","adapt","addax","added",
    "adder","addle","adeem","adept","adieu","adios","admit","admix","adobe","adopt",
    "adore","adorn","adown","adult","adust","adyta","adzed","adzes","aegis","aeons",
    "aerie","afars","affix","afire","afoot","afore","after","again","agama","agape",
    "agate","agave","agaze","agene","agent","agers","agger","aggie","aging","agios",
    "agism","agist","aglet","agley","aglow","agmas","agone","agons","agony","agora",
    "agree","agria","agues","ahead","ahold","aided","aider","aides","ailed","aimed",
    "aimer","aioli","aired","airer","airns","airth","airts","aisle","aitch","aiver",
    "ajiva","ajuga","akees","akela","akene","alack","alamo","aland","alane","alang",
    "alans","alant","alarm","alary","alate","album","alcid","alder","aldol","alecs",
    "alefs","aleph","alert","algae","algal","algas","algid","algin","algor","alias",
    "alibi","alien","align","aline","alist","alive","allay","alley","allod","allot",
    "allow","alloy","allyl","almah","almas","almeh","almes","almon","alms","almud",
    "almug","aloes","aloft","aloha","alone","along","aloof","aloud","alpha","altar",
    "alter","altho","altos","alula","alums","alway","amass","amaze","amber","ambit",
    "amble","ambos","ambry","ameba","ameer","amend","amens","ament","amias","amice",
    "amici","amide","amids","amies","amiga","amigo","amine","amino","amins","amirs",
    "amiss","amity","ammos","amnio","amoks","among","amort","amour","amped","ample",
    "amply","ampul","amuck","amuse","amyls","ancon","anger","angle","angry","angst",
    "anime","anion","anise","ankhs","ankle","anlas","annal","annas","annex","annoy",
    "annul","anoas","anode","anole","anomy","ansae","antae","antas","anted","antes",
    "antic","antis","antra","antre","antsy","anvil","aorta","apace","apart","apeak",
    "apers","apery","aphid","aphis","apian","aping","apish","apnea","apods","aport",
    "appal","appel","apple","apply","apron","apses","apsis","aptly","aquae","aquas",
    "araks","arbor","ardeb","ardor","areae","areal","areas","areca","arena","arene",
    "arepa","arete","argal","argil","argle","argon","argot","argue","argus","arhat",
    "arias","ariel","arils","arise","arles","armed","armer","armet","armor","aroid",
    "aroma","arose","arpen","array","arris","arrow","arsed","arses","arsis","arson",
    "artal","artel","artsy","arums","arval","arved","arves","aryls","ascot","asdic",
    "ashed","ashen","ashes","aside","asked","asker","askew","aspen","asper","aspic",
    "aspis","assai","assay","assed","asses","asset","ataps","ataxy","atilt","atlas",
    "atman","atmas","atoms","atomy","atone","atony","atopy","atria","atrip","attar",
    "attic","audad","audio","audit","auger","aught","augur","aunts","aunty","aurae",
    "aural","aurar","auras","aurei","aures","auric","auris","aurum","autos","avail",
    "avant","avast","avers","avert","avian","avids","avion","aviso","avoid","avows",
    "await","awake","award","aware","awash","awful","awing","awned","awner","awning",
    "axels","axial","axile","axils","axing","axiom","axion","axled","axles","axman",
    "axmen","axone","axons","ayahs","azans","azide","azido","azine","azlon","azoic",
    "azole","azons","azote","azoth","azure","baaed","baals","babas","babel","babes",
    "babka","baboo","babul","babus","backs","bacon","baddy","badge","badly","bagel",
    "baggy","bahts","bails","bairn","baits","baize","baked","baker","bakes","balas",
    "balds","baldy","baled","baler","bales","balks","balky","balls","bally","balms",
    "balmy","balsa","banal","banco","bands","bandy","baned","banes","bangs","banjo",
    "banks","banns","barbs","barde","bards","bared","barer","bares","barfs","barge",
    "baric","barks","barky","barms","barmy","barns","barny","baron","barre","baser",
    "bases","basic","basil","basin","basis","basks","bassi","basso","bassy","baste",
    "basts","batch","bated","bates","bathe","baths","batik","baton","batts","batty",
    "bauds","baulk","bawds","bawdy","bawls","bawns","bayou","beach","beads","beady",
    "beaks","beaky","beams","beamy","beano","beans","beard","bears","beast","beats",
    "beaus","beaut","beaux","bebop","becap","becks","bedel","bedew","bedim","beech",
    "beedi","beefs","beefy","beeps","beers","beery","beets","began","begat","beget",
    "begin","begot","begun","being","belay","belch","belie","belle","bells","belly",
    "below","belts","bemas","bench","bends","bendy","benes","benne","benni","benny",
    "bents","beret","bergs","berks","berms","berry","berth","beryl","beset","beside",
    "besom","besot","bests","betas","betel","beths","bevel","bewig","bezel","bhaji",
    "bible","bicep","biddy","bided","bider","bides","bidet","bidis","biers","biffs",
    "biffy","bifid","biggy","bight","bigly","bigot","bijou","biked","biker","bikes",
    "bilbo","biles","bilge","bilgy","bilks","bills","billy","bimbo","binal","binds",
    "bines","binge","bingo","biome","biont","biota","biped","bipod","birch","birds",
    "birle","birls","birrs","birth","bison","biter","bites","bitsy","bitts","bitty",
    "bizes","blabs","black","blade","blabs","blaff","blags","blahs","blame","bland",
    "blank","blare","blase","blast","blats","blaze","bleak","blear","bleat","bleed",
    "blend","bless","blest","blets","blimp","blind","bling","blini","blink","blips",
    "bliss","blite","blitz","bloat","blobs","block","blocs","blogs","bloke","blond",
    "blood","bloom","bloop","blots","blown","blows","blowy","blubs","blued","bluer",
    "blues","bluet","bluey","bluff","blume","blunt","blurb","blurs","blurt","blush",
    "board","boars","boast","boats","bobby","bocce","bocci","bocks","boded","bodes",
    "bodge","bogey","boggy","bogie","bogus","bohea","boils","bolar","bolas","bolds",
    "boles","bolls","bolts","bolus","bombe","bombs","bonds","boned","boner","bones",
    "boney","bongo","bongs","bonks","bonne","bonny","bonus","bonze","boobs","booby",
    "booed","books","booms","boomy","boons","boors","boost","booth","boots","booty",
    "booze","boozy","boral","boras","borax","bored","borer","bores","boric","borne",
    "boron","borts","borty","bortz","bosks","bosky","bosom","boson","bossy","bosun",
    "botch","bothy","botts","bough","boule","bound","bourg","bourn","bouse","bousy",
    "bouts","bovid","bowed","bowel","bower","bowls","bowse","boxed","boxer","boxes",
    "boyar","boyed","boyos","bozos","brace","brach","bract","brads","braes","brags",
    "braid","brail","brain","brake","braky","brand","brank","brans","brant","brash",
    "brass","brats","brava","brave","bravo","brawl","brawn","braws","braxy","brays",
    "braze","bread","break","bream","breed","brees","brens","brent","breve","brews",
    "briar","bribe","brick","bride","brief","brier","bries","brigs","brill","brims",
    "brine","bring","brink","brins","briny","brios","brisk","briss","brits","britt",
    "broad","brock","broil","broke","brome","bronc","brood","brook","broom","broos",
    "brose","brosy","broth","brown","brows","brugh","bruin","bruit","brume","brung",
    "brunt","brush","brusk","bruts","brute","bubal","bubba","bubby","bubus","bucko",
    "bucks","buddy","budge","buffo","buffs","buggy","bugle","build","built","bulbs",
    "bulge","bulgy","bulks","bulky","bulla","bulls","bully","bumfs","bumph","bumps",
    "bumpy","bunch","bunco","bunds","bungs","bunko","bunks","bunns","bunny","bunts",
    "buoys","buras","burbs","burds","buret","burgh","burgs","burin","burka","burke",
    "burls","burly","burns","burnt","burps","burro","burrs","burry","bursa","burse",
    "burst","busby","bused","buses","bushy","busks","busts","busty","butch","buteo",
    "butes","butle","butte","butts","butty","butyl","buxom","buyer","buzzy","bwana",
    "bylaw","byres","bytes","byway","cabal","cabby","caber","cabin","cable","cabob",
    "cacao","cacti","caddy","cadet","cadge","cadgy","cadre","cafes","caged","cager",
    "cages","cagey","caids","cairn","caked","cakes","cakey","calfs","calif","calix",
    "calks","calla","calls","calms","calos","calve","calyx","camas","camel","cameo",
    "cames","camos","campo","camps","campy","canal","candy","caned","caner","canes",
    "canid","canna","canny","canoe","canon","canso","canst","canto","cants","canty",
    "caped","caper","capes","capon","capos","carat","carbo","carbs","cards","cared",
    "carer","cares","caret","cargo","carks","carle","carls","carns","carny","carob",
    "carol","carom","carpi","carps","carry","carse","carte","carts","carve","casas",
    "cased","cases","casks","caste","casts","catch","cater","cates","cauls","cause",
    "caved","caver","caves","cavil","cawed","cease","cecal","cecum","cedar","ceded",
    "ceder","cedes","ceils","celeb","cella","celli","cello","cells","celts","cense",
    "cento","cents","centu","ceorl","cepes","cerci","cered","ceres","ceria","ceric",
    "ceros","cesta","cesti","chads","chafe","chaff","chain","chair","chalk","champ",
    "chams","chang","chant","chaos","chape","chaps","chard","charm","chars","chart",
    "chase","chasm","chats","cheap","cheat","check","cheek","cheep","cheer","chees",
    "chefs","chela","chemo","chert","chess","chest","chevy","chews","chewy","chiao",
    "chias","chick","chico","chics","chide","chief","child","chile","chili","chill",
    "chimb","chime","chimp","china","chine","ching","chink","chino","chins","chips",
    "chirk","chirm","chiro","chirp","chirr","chits","chive","chivy","chock","choir",
    "choke","choky","chomp","chook","chops","chord","chore","chose","chott","chows",
    "chubs","chuck","chufa","chuff","chugs","chump","chums","chunk","churl","churn",
    "chute","chyle","chyme","cibol","cider","cigar","ciggy","cilia","cinch","cines",
    "circa","cires","cirri","cisco","cissy","cited","citer","cites","civet","civic",
    "civie","civil","civvy","clack","clads","clags","claim","clamp","clams","clang",
    "clank","clans","claps","clasp","class","clast","clave","clavi","claws","clays",
    "clean","clear","cleat","cleek","clefs","cleft","clerk","clews","click","cliff",
    "climb","clime","cline","cling","clink","clips","cloak","clock","clods","clogs",
    "clone","clonk","clons","cloot","clops","close","cloth","clots","cloud","clour",
    "clout","clove","clown","cloys","clubs","cluck","clued","clues","clump","clung",
    "clunk","coach","coact","coals","coast","coats","cobbs","cobby","cobia","coble",
    "cobra","cocas","cocci","cocks","cocky","cocoa","cocos","codas","codec","coded",
    "coden","coder","codes","codex","codon","coeds","cohos","coifs","coign","coils",
    "coins","coirs","coked","cokes","colas","colds","coled","coles","colic","colin",
    "colly","color","colts","comae","comal","comas","combo","combs","comer","comes",
    "comet","comfy","comic","comma","commo","comms","compo","comps","compt","comte",
    "conch","condo","coned","cones","coney","conge","congo","conic","conin","conks",
    "conky","conns","conte","conus","cooed","cooee","cooer","cooks","cooky","cools",
    "cooly","coomb","coons","coops","coopt","coots","copal","coped","copen","coper",
    "copes","copra","copse","coral","corby","cords","cored","corer","cores","corgi",
    "corks","corky","corms","corns","cornu","corny","corps","corse","cosec","cosed",
    "coses","coset","cosey","coshy","costs","cotan","coted","cotes","couch","coude",
    "cough","could","count","coupe","coups","court","couth","coved","coven","cover",
    "coves","covet","covey","covin","cowed","cower","cowls","cowry","coxae","coxal",
    "coxed","coxes","coyed","coyer","coyly","coypu","cozen","cozes","cozey","cozie",
    "crabs","crack","craft","crags","crake","cramp","crams","crane","crank","crape",
    "craps","crash","crass","crate","crave","crawl","craws","craze","crazy","creak",
    "cream","credo","creds","creed","creek","creel","creep","creme","crepe","crept",
    "crepy","cress","crest","crews","cribs","crick","cried","crier","cries","crime",
    "crimp","cripe","crisp","crits","croak","crock","croft","crone","crony","crook",
    "croon","crops","cross","croup","crowd","crown","crows","croze","crude","cruds",
    "cruel","cruet","crumb","crump","cruor","crura","cruse","crush","crust","cruts",
    "crypt","cubed","cuber","cubes","cubic","cubit","cuddy","cuffs","cuifs","cuing",
    "cukes","culls","cully","culms","culpa","culti","cults","cumin","cunts","cupel",
    "cupid","cuppa","cuppy","curbs","curds","curdy","cured","curer","cures","curet",
    "curfs","curia","curie","curio","curls","curly","curns","curry","curse","curst",
    "curve","curvy","cusec","cushy","cusps","cutch","cuter","cutes","cutey","cutie",
    "cutin","cutis","cutty","cutup","cycad","cycle","cyclo","cyder","cylix","cymae",
    "cymar","cymas","cymes","cymol","cynic","cysts","czars","daces","dacha","daddy",
    "dados","daffs","daffy","dagga","dagos","dahls","daily","dairy","daisy","dales",
    "dally","daman","damar","dames","damns","damps","dance","dandy","dangs","danio",
    "darbs","darer","dares","daric","darks","darns","darts","dashy","dated","dater",
    "dates","datos","datum","daubs","dauby","daunt","davit","dawns","dawts","dazed",
    "deals","dealt","deans","dears","deary","deash","death","deave","debar","debit",
    "debug","debut","decaf","decal","decay","decks","decor","decoy","decry","deeds",
    "deedy","deems","deeps","deers","deets","defat","defer","defis","defog","degas",
    "degum","deice","deify","deign","deils","deism","deist","deity","delay","deled",
    "deles","delfs","delft","delis","dells","delly","delta","delts","delve","demes",
    "demit","demob","demon","demos","demur","denes","denim","dense","dents","deoxy",
    "depot","depth","derby","derig","derma","derms","derry","desks","deter","detox",
    "deuce","devas","devel","devil","devon","dewan","dewax","dewed","diads","diary",
    "diazo","diced","dicer","dices","dicey","dicks","dicky","dicot","dicta","didie",
    "didos","didst","diene","diets","diffs","dight","digit","diked","diker","dikes",
    "dildo","dills","dilly","dimer","dimes","dimly","dinar","dined","diner","dines",
    "dingo","dings","dingy","dinks","dinky","dinos","dints","diode","dippy","dipso",
    "diram","direr","dirge","dirks","dirls","dirts","dirty","disco","discs","dishy",
    "disks","ditas","ditch","dites","ditsy","ditto","ditty","ditzy","divan","divas",
    "dived","diver","dives","divot","divvy","diwan","dixie","dixit","dizen","dizzy",
    "djinn","djins","doats","dobby","docks","dodge","dodgy","dodos","doers","doest",
    "doeth","doffs","doges","doggo","doggy","dogie","dogma","doily","doing","doits",
    "doled","doles","dolls","dolly","dolor","dolts","domed","domes","domic","donee",
    "donga","dongs","donna","donne","donor","donut","dooms","doors","doozy","doped",
    "doper","dopes","dopey","dorks","dorky","dorms","dormy","dorps","dorrs","dorsa",
    "dosed","doser","doses","dotal","doted","doter","dotes","dotty","doubt","douce",
    "dough","douma","doura","douse","doven","doves","dowdy","dowed","dowel","dower",
    "downs","downy","dowry","dowse","doxie","doyen","dozed","dozen","dozer","dozes",
    "draft","drags","drain","drake","drama","drams","drank","drape","drawl","drawn",
    "draws","drays","dread","dream","dreck","dreed","drees","dregs","dress","dried",
    "drier","dries","drift","drill","drink","drips","dript","drive","droit","droll",
    "drone","drool","droop","drops","dross","drove","drown","drugs","druid","drums",
    "drunk","drupe","druse","dryad","dryer","dryly","duals","ducat","ducks","ducky",
    "ducts","duddy","dudes","duels","duets","duffs","duffy","dugup","duked","dukes",
    "dulls","dully","dulse","dumas","dummy","dumps","dumpy","dunce","dunes","dungs",
    "dungy","dunks","dunno","dunts","duped","duper","dupes","duple","dural","duras",
    "dured","dures","durns","duroc","duros","durra","durrs","durst","durum","dusks",
    "dusky","dusts","dusty","dutch","dwale","dwarf","dweeb","dwell","dwelt","dwine",
    "dyads","dyers","dying","dyked","dykes","dykey","eager","eagle","eared","earls",
    "early","earns","earth","eased","easel","easer","easts","eaten","eater","eaved",
    "eaves","ebbed","ebbet","ebony","ebook","eched","eches","eclat","edema","edged",
    "edger","edges","edict","edify","edits","educt","egged","egger","egads","eight",
    "eject","eking","elate","elbow","elder","elect","elegy","elfin","elite","elope",
    "elude","elute","elver","elves","email","embed","ember","emcee","emend","emery",
    "emirs","emits","emoji","emote","empty","enact","ended","ender","endow","endue",
    "enemy","enjoy","ennui","enorm","enrol","ensue","enter","entry","envoi","envoy",
    "epoch","epoxy","equal","equip","erase","erect","erode","error","erupt","essay",
    "ester","ethic","ethos","evade","event","every","evict","evoke","exact","exalt",
    "exams","excel","exert","exile","exist","expat","expel","extra","exude","exult",
    "eying","eyrie","fable","faced","facer","faces","facet","facto","facts","faddy",
    "faded","fader","fades","fagot","fails","faint","fairy","faith","faked","faker",
    "fakes","falls","false","famed","fancy","fangs","farce","farms","fatal","fatty",
    "fault","fauna","fawns","feast","feats","fecal","feeds","feels","feign","feint",
    "fella","felon","femur","fence","fends","feral","ferry","fetal","fetch","fetid",
    "fetus","feud","fever","fewer","fiber","fibre","field","fiend","fiery","fifth",
    "fifty","fight","filch","filed","filer","files","filet","fills","filly","films",
    "filmy","filth","final","finch","finds","fined","finer","fines","fired","fires",
    "firms","first","fishy","fists","fitly","fits","fiver","fives","fixed","fixer",
    "fixes","fizzy","fjord","flack","flags","flair","flake","flaky","flame","flank",
    "flaps","flare","flash","flask","flats","flaws","flaxy","flays","fleas","fleck",
    "flees","fleet","flesh","flick","flied","flier","flies","fling","flint","flips",
    "flirt","float","flock","flogs","flood","floor","flops","flora","floss","flour",
    "flout","flowed","flows","fluid","fluke","fluky","flung","flunk","flush","flute",
    "foamy","focal","focus","foggy","foils","folds","folio","folks","folly","fonts",
    "foods","foody","fools","foray","force","forge","forgo","forks","forms","forte",
    "forth","forty","forum","fossil","found","fount","fours","foxed","foxes","foyer",
    "frail","frame","frank","fraud","frays","freak","freed","freer","fresh","friar",
    "fried","fries","frill","frisk","fritz","frizz","frock","frogs","from","front",
    "frost","froth","froze","fruit","frump","fryer","fudge","fuels","fugal","fugue",
    "fully","fumed","fumes","funds","fungi","funky","funny","furry","fused","fuses",
    "fussy","dusty","fuzzy","gable","gaffe","gaily","gains","gaits","gales","gamer",
    "games","gamma","gamut","gangs","gapes","garbs","gases","gasps","gates","gauge",
    "gaunt","gauze","gauzy","gavel","gawky","gazer","gazes","gears","gecko","geeks",
    "geeky","geese","genie","genre","gents","germs","ghost","giant","giddy","gifts",
    "gilds","gills","given","giver","gives","gizmo","gland","glare","glass","glaze",
    "gleam","glean","glide","glint","globe","gloom","glory","gloss","glove","glows",
    "glued","glues","glyph","gnarly","gnash","gnats","gnaws","gnome","goads","goals",
    "goats","godly","going","golds","golfs","gonna","goods","gooey","goofs","goofy",
    "goose","gorge","gory","gouge","gourd","grace","grade","graft","grail","grain",
    "grand","grant","grape","graph","grasp","grass","grate","grave","gravy","grays",
    "graze","great","greed","greek","green","greet","grief","grill","grime","grimy",
    "grind","grins","gripe","grips","groan","groin","groom","grope","gross","group",
    "grout","grove","growl","grown","grows","grubs","gruel","gruff","grump","grunt",
    "guard","guava","guess","guest","guide","guild","guilt","guise","gulch","gulls",
    "gulps","gummy","gumps","gunky","gunky","guppy","gusts","gusty","gutsy","gutter",
    "guys","gypsy","gyros","habit","haiku","hairs","hairy","hales","halts","halve",
    "hands","handy","hangs","happy","hardy","harem","harks","harms","harps","harry",
    "harsh","haste","hasty","hatch","hated","hater","hates","hauls","haunt","haven",
    "havoc","hawks","hazel","heads","heals","heaps","heard","hears","heart","heats",
    "heavy","hedge","heeds","heels","hefty","heirs","heist","hello","helps","hence",
    "herbs","herds","heron","hertz","hides","highs","hiked","hiker","hikes","hills",
    "hilly","hinge","hints","hippo","hippy","hired","hitch","hoard","hoary","hobby",
    "hoist","holds","holes","holly","homer","homes","honey","honor","hoods","hoofs",
    "hooks","hoops","hoped","hopes","horns","horny","horse","hosts","hotel","hound",
    "hours","house","hover","howdy","howls","human","humid","humor","humps","humpy",
    "humus","bunch","hunks","hunky","hunts","hurls","hurry","hurts","husks","husky",
    "hyena","hyper","icing","icons","ideal","ideas","idiot","idled","idler","idles",
    "idols","igloo","image","imbue","impel","imply","inane","inbox","incur","index",
    "indie","inept","inert","infer","infix","infra","inked","inlet","inner","input",
    "inset","inter","intro","ionic","irate","irked","irony","isles","issue","itchy",
    "items","ivory","jabot","jacks","jaded","jails","jeans","jelly","jerks","jerky",
    "jests","jewel","jiffy","jig","jimmy","joins","joker","jokes","jolly","jolts",
    "joust","joyed","judge","juice","juicy","jumbo","jumps","jumpy","junco","junky",
    "juror","juicy","kaput","karma","kayak","kebab","keels","keeps","kelps","khaki",
    "kicks","kills","kilns","kilts","kinds","kings","kiosk","kites","knack","knead",
    "kneed","kneel","knelt","knelt","knelt","knelt","knife","knits","knobs","knock",
    "knoll","knots","known","knows","knurl","koala","kudos","label","labor","laced",
    "laces","lacks","laden","ladle","lager","laggy","laird","lairs","lakes","lambs",
    "lamed","lamer","lamps","lance","lands","lanes","lanky","lapel","lapse","large",
    "larks","larva","laser","lasso","lasts","latch","later","latex","lathe","lauds",
    "laugh","layer","leads","leafy","leaks","leaky","leans","leapt","learn","lease",
    "leash","least","leave","ledge","leech","leeks","lefts","lefty","legal","lemon",
    "lends","level","lever","liana","liars","libel","light","liked","liken","likes",
    "lilac","lilts","limbo","limbs","limed","limes","limit","limps","lined","linen",
    "liner","lines","lingo","lings","links","lions","lipid","lists","liter","lithe",
    "lived","liven","liver","lives","livid","llama","loads","loafs","loams","loamy",
    "loans","lobby","lobes","local","locks","locus","lodge","lofts","lofty","logic",
    "login","logos","loins","lolls","loner","looks","looms","loons","loony","loops",
    "loopy","loose","loots","lords","lorry","loser","loses","lossy","lotus","lousy",
    "loved","lover","loves","lower","lowly","loyal","lucid","lucky","lulls","lumen",
    "lumps","lumpy","lunar","lunch","lunge","lungs","lurch","lured","lures","lurks",
    "lusty","lying","lymph","lynch","lyric","macho","macro","madam","madly","mafia",
    "magic","magma","major","maker","makes","males","malls","malts","mamma","mango",
    "mange","mangy","mania","manic","manor","maple","march","marks","marry","marsh",
    "masks","mason","masse","match","mated","mates","maths","matte","mauls","mayor",
    "mazes","mealy","means","meats","meaty","medal","media","meets","melee","melon",
    "melts","memos","mends","menus","mercy","merge","merit","merry","messy","metal",
    "meter","midst","might","mills","mimed","mimic","mince","minds","mined","miner",
    "mines","minor","minus","mirth","miser","misty","miter","mitre","mixed","mixer",
    "mixes","moans","moats","model","modem","modes","mogul","moist","molar","molds",
    "moldy","moles","molls","molts","money","monks","month","moods","moody","moose",
    "moral","morel","morph","mossy","motel","moths","motif","motor","motto","mould",
    "moult","mound","mount","mourn","mouse","mousy","mouth","moved","mover","moves",
    "movie","mowed","mower","much","mucus","muddy","muffs","muggy","mulch","mules",
    "mulls","multi","mumps","munch","mural","murky","music","musky","musty","muted",
    "mutes","myrrh","myths","nails","naive","named","names","nanny","napes","nappy",
    "narcs","nasty","natal","naval","navel","neaps","nears","neats","necks","needs",
    "needy","nerve","nervy","nests","never","newer","newly","newts","nexus","nicer",
    "niche","nicks","niece","night","nimby","ninja","ninth","nippy","nitro","noble",
    "nobly","noise","noisy","nomad","nonce","nooks","norms","north","notch","noted",
    "notes","nouns","novel","nudge","nurse","nutty","nylon","nymph","oaken","oases",
    "oasis","oaten","oater","oaths","occur","ocean","ochre","oddly","odder","odors",
    "offal","offer","often","ogled","ogler","ogles","oiled","oinks","olden","older",
    "olive","omega","omens","omits","onset","oomph","opens","opera","optic","opted",
    "optic","orbit","order","organ","other","otter","ought","ounce","outer","outdo",
    "outed","outer","outgo","outre","ovals","ovary","ovate","ovens","overs","overt",
    "ovoid","ovule","owing","owlet","owned","owner","oxide","ozone","paced","pacer",
    "paces","packs","paddy","padre","pagan","paged","pager","pages","pails","pains",
    "paint","pairs","paler","pales","palms","palsy","panda","pandy","panel","panes",
    "pangs","panic","pansy","pants","papal","papas","paper","parch","pared","parer",
    "pares","paris","parks","parry","parse","parts","party","paste","pasts","pasty",
    "patch","pated","pater","paths","patio","patsy","patty","pause","paved","paver",
    "paves","pawed","pawns","payed","payee","payer","peace","peach","peaks","peaky",
    "pearl","pears","pease","peats","peaty","pecan","pecks","pedal","peeks","peels",
    "peeps","peers","peeve","penal","pence","pends","penny","peons","peppy","perch",
    "peril","perks","perky","perms","pesos","pests","petal","peter","petit","petty",
    "phase","phone","phony","photo","piano","picks","picky","piece","piers","piggy",
    "pigmy","piked","piker","pikes","piled","piles","pills","pilot","pimps","pinch",
    "pined","pines","pings","pinko","pinks","pinky","pinna","pinto","pints","pious",
    "piped","piper","pipes","pique","pitch","piths","pithy","piton","pivot","pixel",
    "pixie","pizza","place","plaid","plain","plait","plane","plank","plans","plant",
    "plate","plats","plays","plaza","plead","pleas","pleat","plied","plier","plies",
    "plods","plonk","plots","plows","ploys","pluck","plugs","plumb","plume","plump",
    "plums","plums","plums","plumy","plunk","plush","plyer","poach","pocks","pocky",
    "podgy","poems","poets","point","poise","poked","poker","pokes","polar","poled",
    "poles","polls","polyp","polys","ponds","pooch","poods","pools","poofy","poops",
    "poppy","popup","porch","pored","pores","porgy","porks","porky","ports","posed",
    "poser","poses","posit","posse","posts","potty","pouch","poult","pound","pours",
    "pouts","pouty","power","poxed","poxes","prams","prank","prawn","prays","press",
    "price","prick","pride","pried","prier","pries","prigs","prima","prime","primo",
    "primp","prims","print","prion","prior","prism","privy","prize","probe","prods",
    "profs","promo","proms","prone","prong","proof","props","prose","prosy","proud",
    "prove","prowl","prows","prude","prune","pryer","psalm","pubic","pucks","pudgy",
    "puffs","puffy","pulls","pulps","pulpy","pulse","pumas","pumps","punch","punks",
    "punky","punny","punts","pupae","pupal","pupil","puppy","puree","purer","purge",
    "purls","purrs","purse","pushy","pussy","putts","putty","pygmy","quack","quaff",
    "quail","quake","qualm","qualm","quark","quart","quasi","queen","queer","quell",
    "query","quest","queue","quick","quids","quiet","quill","quilt","quirk","quota",
    "quote","quoth","rabbi","rabid","raced","racer","races","racks","radar","radii",
    "radio","radix","radon","rafts","raged","rages","raids","rails","rains","rainy",
    "raise","rajah","raked","raker","rakes","rally","ramps","ranch","range","rangy",
    "ranks","rants","rapid","rared","rarer","rares","raspy","rated","rates","ratio",
    "ratty","raved","raven","raver","raves","rawer","rayon","razed","razer","razes",
    "razor","reach","reads","ready","reais","realm","reals","reams","reaps","rears",
    "rebel","rebid","rebus","rebut","recap","recur","recut","redid","redly","redux",
    "reeds","reedy","reefs","reeks","reeky","reels","refer","refit","regal","reign",
    "reins","relax","relay","relic","relit","remit","renal","rends","renew","rents",
    "repay","repel","reply","repos","repro","reran","rerun","resat","reset","resin",
    "rests","retag","retch","retro","retry","reuse","revel","revue","rhino","rhyme",
    "rider","rides","ridge","ridgy","rifle","rifts","right","rigid","rigor","riled",
    "rills","rinds","rings","rinks","rinse","riots","ripen","riper","risen","riser",
    "rises","risky","rites","ritzy","rival","rived","riven","river","rivet","roads",
    "roams","roars","roast","robed","robes","robin","robot","rocks","rocky","rodeo",
    "roger","rogue","roles","rolls","roman","romps","roofs","rooks","rooms","roomy",
    "roost","roots","rooty","roped","roper","ropes","roses","rosin","rotor","rouge",
    "rough","round","rouse","route","rover","roves","rowdy","rowed","rower","royal",
    "rucks","ruddy","rued","rugby","ruins","ruled","ruler","rules","rumba","rumor",
    "rumps","runes","rungs","runic","runny","runts","rural","ruses","rushy","rusks",
    "rusts","rusty","sable","sabot","sacks","sadly","safer","safes","sages","sahib",
    "saice","saids","sails","saint","saith","saker","sakes","salad","sales","sally",
    "salon","salsa","salts","salty","salve","salvo","samba","sands","sandy","saner",
    "sanes","sangs","sapid","sapor","sappy","saree","sarge","saris","saros","sasin",
    "sassy","satay","sated","satem","satin","satyr","sauce","sauch","saucy","saugh",
    "sauls","sauna","saunt","saute","saved","saver","saves","savor","savoy","savvy",
    "sawed","sawer","saxes","sayer","sayst","scabs","scads","scaff","scald","scale",
    "scalp","scaly","scamp","scams","scans","scant","scare","scarf","scarp","scars",
    "scary","scats","scene","scent","schmo","schul","scion","scoff","scold","scone",
    "scoop","scoot","scope","scops","score","scorn","scots","scour","scout","scowl",
    "scows","scram","scrap","scree","screw","scrim","scrip","scrub","scrum","scuba",
    "scuds","scuff","sculk","skull","sculp","scums","scurf","seats","sedan","seeds",
    "seedy","seeks","seems","seeps","seepy","seers","segue","seize","sells","semis",
    "sends","sense","sepia","serge","serum","serve","setup","seven","sever","sewed",
    "sewer","shade","shady","shaft","shags","shake","shaky","shall","shame","shams",
    "shank","shape","shard","share","shark","sharp","shave","shawl","shawm","shaws",
    "shays","shear","sheds","sheen","sheep","sheer","sheet","shelf","shell","shied",
    "shier","shift","shill","shims","shine","shins","shiny","ships","shire","shirk",
    "shirr","shirt","shish","shits","shiva","shive","shlep","shmoo","shoal","shock",
    "shoed","shoer","shoes","shone","shook","shoot","shore","shorn","short","shote",
    "shots","shout","shove","shown","shows","showy","shrub","shrug","shuck","shuls",
    "shuns","shunt","shush","shuts","shyer","shyly","sided","sides","siege","sieve",
    "sighs","sight","sigma","signs","silks","silky","sills","silly","silts","silty",
    "since","sinew","singe","sings","sinks","sinus","siren","sires","sissy","sitar",
    "sited","sites","sixth","sixty","sized","sizer","sizes","skald","skate","skeet",
    "skein","skelp","skene","skeps","skews","skids","skied","skier","skies","skill",
    "skimp","skims","skins","skint","skips","skirl","skirt","skits","skulk","skull",
    "skunk","slabs","slack","slags","slain","slake","slams","slang","slant","slaps",
    "slash","slate","slats","slave","slays","sleds","sleek","sleep","sleet","slept",
    "slice","slick","slide","slime","slimy","sling","slink","slips","slits","slobs",
    "slogs","slope","slops","slosh","sloth","slots","slows","slubs","sludg","slugs",
    "slump","slums","slung","slunk","slurp","slurs","slush","slyly","smack","small",
    "smart","smash","smear","smell","smelt","smile","smirk","smite","smith","smock",
    "smogs","smoke","smoky","smolt","snack","snafu","snags","snail","snake","snaky",
    "snaps","snare","snark","snarl","sneak","sneer","snide","sniff","snipe","snips",
    "snits","snobs","snoop","snore","snort","snots","snout","snowy","snubs","snuff",
    "snugs","soapy","soars","sober","socks","sofas","softy","soggy","soils","solar",
    "soled","solely","solemn","soles","solid","solon","solos","solve","sonar","songs",
    "sonic","sooth","soots","sooty","sopor","soppy","sorbs","sorer","sores","sorry",
    "sorta","sorts","souls","sound","soups","soupy","sours","south","sowed","sower",
    "space","spade","spall","spams","spans","spare","spark","spars","spasm","spate",
    "spawn","speak","spear","speck","specs","speed","spell","spelt","spend","spent",
    "sperm","spice","spicy","spied","spiel","spier","spies","spike","spiky","spill",
    "spine","spiny","spite","spits","splat","split","spoke","spoof","spook","spool",
    "spoon","spoor","spore","sport","spots","spout","spray","spree","sprig","sprit",
    "sprue","sprug","spuds","spued","spues","spume","spumy","spunk","spurn","spurs",
    "spurt","squad","squat","squid","stabs","stack","staff","stage","stags","stagy",
    "staid","stain","stair","stake","stale","stalk","stall","stamp","stand","stank",
    "staph","stare","stark","stars","start","stash","state","stave","stays","steak",
    "steal","steam","steel","steep","steer","stems","steno","steps","stern","stets",
    "stews","stick","stiff","still","stilt","sting","stink","stint","stirs","stock",
    "stoic","stoke","stole","stomp","stone","stony","stood","stool","stoop","stops",
    "store","stork","storm","story","stout","stove","stows","strap","straw","stray",
    "strip","strep","strew","strip","strop","strut","stubs","stuck","studs","study",
    "stuff","stump","stums","stung","stunk","stuns","stunt","style","suave","sucks",
    "suede","sugar","suite","suits","sulks","sulky","sully","sumac","summa","sumps",
    "sunks","sunna","sunns","sunny","sunup","super","supra","surds","surer","surfs",
    "surfy","surge","surly","sushi","swabs","swage","swags","swail","swain","swale",
    "swami","swamp","swams","swang","swank","swans","swaps","sward","swarf","swarm",
    "swart","swash","swath","swats","sways","swear","sweat","sweep","sweet","swell",
    "swept","swift","swigs","swill","swims","swine","swing","swipe","swirl","swish",
    "swiss","swive","swoon","swoop","swops","sword","swore","sworn","swung","syncs",
    "synod","syrup","tabby","tabled","table","taboo","tacit","tacks","tacky","tacos",
    "tacts","taffy","tails","taint","taken","taker","takes","tales","talks","tally",
    "talon","tamed","tamer","tames","tango","tangs","tangy","tanks","taper","tapes",
    "tapir","tardy","tared","tares","tarns","tarot","tarps","tarry","tarsi","tarts",
    "tasks","taste","tasty","tater","tatty","taunt","tawny","taxed","taxes","taxis",
    "teach","teaks","teals","teams","tears","teary","tease","teats","techs","teddy",
    "teens","teeny","teeth","tells","tempo","temps","tench","tends","tenet","tenor",
    "tense","tenth","tents","tepee","tepid","terms","terns","terra","terse","testy",
    "texts","thank","thane","thaws","theft","their","theme","there","these","thick",
    "thief","thigh","thing","think","third","thong","thorn","those","three","threw",
    "throw","thuds","thugs","thumb","thump","thyme","tiara","tibia","tidal","tided",
    "tides","tiers","tiger","tight","tikes","tilde","tiled","tiler","tiles","tilts",
    "timed","timer","times","timid","tinny","tints","tippy","tipsy","tired","tires",
    "titan","title","toast","today","toddy","toffs","toffy","togas","token","tolls",
    "tombs","tomes","tonal","toned","toner","tones","tongs","tonic","tools","tooth",
    "topaz","topic","topsy","torch","torus","total","totem","touch","tough","tours",
    "towel","tower","towns","toxic","toyed","trace","track","tract","trade","trail",
    "train","trait","tramp","trams","trawl","trays","tread","treat","treed","trees",
    "trend","tress","triad","trial","tribe","trick","tried","trier","tries","trigs",
    "trill","trims","trine","trios","trips","trite","troll","tromp","troop","trope",
    "troth","trots","trout","trove","trows","truce","truck","trued","truer","trues",
    "trugs","truly","trump","trunk","truss","trust","truth","tryst","tsars","tubas",
    "tubby","tubed","tuber","tubes","tucks","tulip","tulls","tumid","tummy","tumor",
    "tumps","tunas","tuned","tuner","tunes","tunny","turbo","turds","turfs","turfy",
    "turns","turps","tutor","tutus","tuxes","twain","twang","tweak","tweed","tweet",
    "twice","twigs","twill","twine","twins","twirl","twist","tying","typed","typer",
    "types","typos","udder","ulcer","ultra","umbra","umped","unbar","uncap","uncle",
    "uncut","under","undue","undid","unfit","unify","union","unite","units","unity",
    "unlit","unmet","until","unwed","unzip","upper","upset","urban","urged","urges",
    "urine","usage","usher","using","usual","usurp","utter","uvula","vague","valet",
    "valid","valor","value","valve","vamps","vanes","vapid","vapor","vault","vaunt",
    "veers","veils","veins","veiny","veldt","venom","vents","venue","verbs","verge",
    "verse","verve","vests","vexed","vexes","vials","vibes","vicar","video","views",
    "vigor","villa","vinca","vines","vinyl","viola","viols","viper","viral","virus",
    "visor","visit","vista","vital","vivid","vixen","vocal","vodka","vogue","voice",
    "voila","volts","voter","votes","vouch","vowed","vowel","vulva","vying","wacko",
    "wacky","waded","wader","wades","wafer","waged","wager","wages","wagon","waifs",
    "wails","waist","waits","waive","waked","waken","wakes","walks","walls","waltz",
    "wands","waned","wanes","wants","wards","wares","warns","warps","warts","warty",
    "washy","waste","watch","water","watts","waved","waver","waves","wavy","waxed",
    "waxen","waxes","ways","weald","weals","weans","wears","weary","weave","webby",
    "wedge","wedgy","weeds","weedy","weeks","weeny","weeps","weepy","weest","weigh",
    "weird","wells","welly","welsh","welts","wench","wends","whack","whale","whams",
    "wharf","wheat","wheel","whelk","whelp","where","which","whiff","while","whims",
    "whine","whiny","whips","whirl","whirr","whirs","whisk","white","whole","whomp",
    "whoop","whose","wicks","widen","wider","wides","widow","width","wield","wifed",
    "wilds","wiled","wiles","wills","willy","wilts","wimps","wimpy","wince","winch",
    "winds","windy","wined","wines","wings","winks","wiped","wiper","wipes","wired",
    "wires","wised","wiser","wisps","wispy","witch","witty","wived","wives","wizen",
    "wacke","woken","wolfs","woman","women","woods","woody","wooer","woofs","wooly",
    "words","wordy","works","world","worms","wormy","worry","worse","worst","worth",
    "would","wound","woven","wrack","wraps","wrath","wreak","wreck","wrest","wring",
    "wrist","write","writs","wrong","wrote","wrung","wryly","xenon","xerox","yacht",
    "yahoo","yanks","yards","yarns","yawns","yearn","years","yeast","yells","yelps",
    "yield","yodel","yolks","young","yours","youth","yucca","yucky","yukky","zebra",
    "zesty","zilch","zincs","zingy","zippy","zloty","zonal","zones","zooms"
]);

// Also add all answer words as valid guesses
const ANSWER_WORDS_STR = "about,above,abuse,actor,acute,admit,adopt,adult,after,again,agent,agree,ahead,alarm,album,alert,alien,align,alive,alley,allow,alone,along,alter,among,angel,anger,angle,angry,anime,ankle,annex,apart,apple,apply,arena,argue,arise,armor,array,arrow,aside,asset,atlas,attic,audio,audit,avoid,awake,award,aware,awful,bacon,badge,badly,bagel,baker,bases,basic,basin,basis,batch,beach,beard,beast,begun,being,belly,below,bench,berry,bible,birth,black,blade,blame,bland,blank,blast,blaze,bleed,blend,bless,blind,blink,bliss,block,blood,bloom,blown,blues,bluff,blunt,board,boast,bonus,boost,booth,bound,bowel,boxer,brain,brand,brave,bread,break,breed,brick,bride,brief,bring,broad,broke,brook,brown,brush,buddy,build,built,bunch,burst,buyer,cabin,cable,camel,candy,cargo,carry,catch,cater,cause,cedar,chain,chair,chalk,chaos,charm,chart,chase,cheap,check,cheek,cheer,chess,chest,chief,child,china,chunk,churn,civic,civil,claim,clash,class,clean,clear,clerk,click,cliff,climb,cling,clock,clone,close,cloth,cloud,clown,coach,coast,cobra,cocoa,color,comet,comic,coral,corps,couch,could,count,court,cover,crack,craft,crane,crash,crazy,cream,crest,crime,crisp,cross,crowd,crown,cruel,crush,curve,cycle,daily,dance,datum,dealt,death,debug,debut,decal,decay,decor,decoy,delay,delta,demon,dense,depot,depth,derby,deter,detox,devil,diary,dirty,disco,ditch,dodge,donor,doubt,dough,draft,drain,drake,drama,drank,drape,drawn,dread,dream,dress,dried,drift,drill,drink,drive,droit,drone,drove,drown,drugs,drums,drunk,dryer,dummy,dusty,dwarf,dwell,dying,eager,eagle,early,earth,easel,eight,elect,elite,embed,ember,emoji,empty,ended,enemy,enjoy,enter,entry,equal,equip,error,essay,ethic,event,every,evoke,exact,exams,excel,exile,exist,extra,fable,facet,facto,faint,fairy,faith,fancy,fatal,fatty,fault,feast,fence,ferry,fetch,fever,fiber,field,fiery,fifth,fifty,fight,filed,final,first,fixed,flags,flame,flash,flask,flesh,flies,float,flock,flood,floor,flora,flour,fluid,flush,flute,focal,focus,folly,force,forge,forth,forum,found,foxes,frame,frank,fraud,fresh,front,frost,froze,fruit,fully,fungi,funny,gamma,gauge,genre,ghost,giant,given,glare,glass,gleam,globe,gloom,glory,gloss,glove,gonna,grace,grade,grain,grand,grant,grape,graph,grasp,grass,grave,great,greed,green,greet,grief,grill,grind,groan,groom,gross,group,grove,grown,guard,guess,guest,guide,guild,guilt,guise,habit,handy,happy,harsh,haste,haven,heads,heart,heavy,hedge,hefty,hello,hence,herbs,honey,honor,hoped,horse,hotel,house,hover,human,humor,humid,hurry,hyper,ideal,image,imply,inbox,index,indie,inner,input,intro,ionic,irony,ivory,jewel,joker,jolly,judge,juice,juicy,jumbo,jumps,karma,kayak,keeps,khaki,kills,knack,kneel,knelt,knife,knock,known,label,labor,lance,large,laser,latch,later,laugh,layer,leads,lease,least,leave,legal,lemon,level,lever,light,liked,limit,linen,liner,liter,lived,liven,liver,local,lodge,logic,loose,lords,lorry,lotus,lover,lower,loyal,lucid,lucky,lunar,lunch,lying,lyric,macro,magic,major,maker,manga,manor,maple,march,marry,marsh,mason,match,mayor,meaty,medal,media,meets,melon,mercy,merge,merit,merry,messy,metal,meter,midst,might,mills,miner,minor,minus,mirth,mixed,model,modem,mogul,moist,money,month,moral,motif,motor,motto,mound,mount,mourn,mouse,mouth,moved,mover,movie,muddy,multi,mural,music,naive,named,nasty,naval,nerve,never,newly,niche,night,noble,noise,north,notch,noted,novel,nurse,nylon,occur,ocean,oddly,offer,often,olive,omega,onset,opera,opted,orbit,order,organ,other,ought,outer,owned,owner,oxide,ozone,paced,paint,panic,paper,parts,party,pasta,paste,patch,pause,peace,peach,pearl,pedal,penny,perch,peril,phase,phone,photo,piano,piece,pilot,pinch,pitch,pixel,pizza,place,plain,plane,plant,plate,plead,pleas,pluck,plumb,plume,plump,point,polar,polls,pooch,poppy,porch,poser,posit,pound,power,press,price,pride,prime,print,prior,prize,probe,prone,proof,prose,proud,prove,proxy,psalm,pulse,pumps,punch,pupil,puppy,purse,qualm,queen,query,quest,queue,quick,quiet,quirk,quota,quote,rabbi,radar,radio,raids,rails,rainy,raise,rally,ranch,range,rapid,ratio,raven,reach,reads,ready,realm,rebel,recap,refer,reign,relax,relay,renal,renew,repay,reply,resin,retro,rider,ridge,rifle,right,rigid,risky,rival,river,roads,robin,robot,rocky,rogue,roots,rouge,rough,round,route,rover,royal,rugby,ruler,rural,sadly,saint,salad,salon,salsa,sauce,saved,scale,scare,scene,scent,scope,score,scout,scrap,screw,sedan,seize,sense,serve,seven,shade,shaft,shake,shall,shame,shape,share,shark,sharp,shear,sheep,sheer,sheet,shelf,shell,shift,shine,shirt,shock,shoot,shore,short,shout,shown,sided,siege,sight,sigma,since,sixth,sixty,sized,skill,skull,slate,slave,sleep,slice,slide,slope,smart,smell,smile,smoke,snack,snake,solar,solid,solve,sorry,south,space,spare,spark,spawn,speak,spear,spell,spend,spent,spice,spill,spine,spite,split,spoke,spoon,sport,spray,squad,stack,staff,stage,stain,stake,stall,stamp,stand,stark,start,state,stays,steak,steal,steam,steel,steep,steer,steps,stick,stiff,still,stock,stole,stone,stood,store,storm,story,stout,stove,strap,straw,stray,strip,stuck,study,stuff,style,sugar,suite,sunny,super,surge,swamp,swear,sweat,sweep,sweet,swept,swift,swing,swirl,sword,swore,sworn,syrup,table,taken,taste,taxes,teach,teeth,tempo,tense,tenth,terms,theft,theme,thick,thief,thing,think,third,thorn,those,three,threw,throw,thumb,tiger,tight,timer,tired,title,today,token,topic,torch,total,touch,tough,towel,tower,toxic,trace,track,trade,trail,train,trait,treat,trend,trial,tribe,trick,tried,troop,truck,truly,trump,trunk,trust,truth,tumor,tuned,tuner,turbo,tutor,twice,twist,tying,ultra,uncle,under,undue,union,unity,until,upper,upset,urban,usage,usher,using,usual,utter,vague,valid,value,valve,vapor,vault,venue,verge,verse,video,vigor,vinyl,viola,viral,virus,visit,vista,vital,vivid,vocal,vodka,voice,voter,vowel,wages,wagon,waist,waste,watch,water,waves,wears,weary,weave,wedge,weigh,weird,whale,wheat,wheel,where,which,while,white,whole,whose,widen,widow,width,wield,witch,woman,women,world,worry,worse,worst,worth,would,wound,wrath,wrist,wrote,yacht,yield,young,youth,zebra";
ANSWER_WORDS_STR.split(",").forEach(w => VALID_GUESSES.add(w));

let targetWord = '';
let currentRow = 0;
let currentCol = 0;
let gameOver = false;
let guesses = [];
let keyStatus = {};

function showScreen(id) {
    document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
    document.getElementById(id).classList.add('active');
}

function showMessage(msg, duration) {
    const el = document.getElementById('message');
    el.textContent = msg;
    el.style.display = 'block';
    setTimeout(() => { el.style.display = 'none'; }, duration || 1500);
}

function buildBoard() {
    const board = document.getElementById('board');
    board.innerHTML = '';
    for (let r = 0; r < 6; r++) {
        const row = document.createElement('div');
        row.className = 'row';
        for (let c = 0; c < 5; c++) {
            const tile = document.createElement('div');
            tile.className = 'tile';
            tile.id = `tile-${r}-${c}`;
            row.appendChild(tile);
        }
        board.appendChild(row);
    }
}

function buildKeyboard() {
    const kb = document.getElementById('keyboard');
    kb.innerHTML = '';
    const rows = [
        ['q','w','e','r','t','y','u','i','o','p'],
        ['a','s','d','f','g','h','j','k','l'],
        ['Enter','z','x','c','v','b','n','m','âŒ«']
    ];
    rows.forEach(row => {
        const rowDiv = document.createElement('div');
        rowDiv.className = 'kb-row';
        row.forEach(key => {
            const btn = document.createElement('button');
            btn.className = 'key';
            btn.textContent = key;
            btn.id = `key-${key}`;
            if (key === 'Enter' || key === 'âŒ«') btn.classList.add('wide');
            btn.addEventListener('click', () => handleKey(key));
            rowDiv.appendChild(btn);
        });
        kb.appendChild(rowDiv);
    });
}

function handleKey(key) {
    if (gameOver) return;
    if (key === 'âŒ«') {
        if (currentCol > 0) {
            currentCol--;
            const tile = document.getElementById(`tile-${currentRow}-${currentCol}`);
            tile.textContent = '';
            tile.classList.remove('filled');
        }
    } else if (key === 'Enter') {
        if (currentCol === 5) submitGuess();
    } else if (key.length === 1 && /[a-z]/.test(key)) {
        if (currentCol < 5) {
            const tile = document.getElementById(`tile-${currentRow}-${currentCol}`);
            tile.textContent = key;
            tile.classList.add('filled');
            tile.classList.add('pop');
            setTimeout(() => tile.classList.remove('pop'), 100);
            currentCol++;
        }
    }
}

function getLetterStatuses(guess, target) {
    const result = Array(5).fill('absent');
    const targetArr = target.split('');
    const guessArr = guess.split('');
    // First pass: correct positions
    for (let i = 0; i < 5; i++) {
        if (guessArr[i] === targetArr[i]) {
            result[i] = 'correct';
            targetArr[i] = null;
            guessArr[i] = null;
        }
    }
    // Second pass: present but wrong position
    for (let i = 0; i < 5; i++) {
        if (guessArr[i] === null) continue;
        const idx = targetArr.indexOf(guessArr[i]);
        if (idx !== -1) {
            result[i] = 'present';
            targetArr[idx] = null;
        }
    }
    return result;
}

function submitGuess() {
    let guess = '';
    for (let c = 0; c < 5; c++) {
        guess += document.getElementById(`tile-${currentRow}-${c}`).textContent;
    }
    guess = guess.toLowerCase();

    if (!VALID_GUESSES.has(guess)) {
        showMessage('Not in word list');
        return;
    }

    guesses.push(guess);
    const statuses = getLetterStatuses(guess, targetWord);

    // Animate tiles
    for (let c = 0; c < 5; c++) {
        const tile = document.getElementById(`tile-${currentRow}-${c}`);
        const status = statuses[c];
        setTimeout(() => {
            tile.classList.add('flip');
            setTimeout(() => {
                tile.classList.add(status);
            }, 250);
        }, c * 300);

        // Update keyboard
        const letter = guess[c];
        const priority = { 'correct': 3, 'present': 2, 'absent': 1 };
        const currentPriority = priority[keyStatus[letter]] || 0;
        if (priority[status] > currentPriority) {
            keyStatus[letter] = status;
        }
    }

    // Update keyboard colors after animation
    setTimeout(() => {
        for (const [letter, status] of Object.entries(keyStatus)) {
            const keyEl = document.getElementById(`key-${letter}`);
            if (keyEl) {
                keyEl.className = 'key ' + status;
            }
        }
    }, 5 * 300 + 300);

    const won = guess === targetWord;
    currentRow++;
    currentCol = 0;

    if (won) {
        setTimeout(() => {
            gameOver = true;
            showEndScreen(true);
        }, 5 * 300 + 500);
    } else if (currentRow >= 6) {
        setTimeout(() => {
            gameOver = true;
            showMessage('The word was: ' + targetWord.toUpperCase(), 3000);
            setTimeout(() => showEndScreen(false), 2000);
        }, 5 * 300 + 500);
    }
}

function showEndScreen(won) {
    document.getElementById('summary-title').textContent = won ? 'You Won!' : 'Game Over';
    document.getElementById('summary-word').textContent = 'The word was: ' + targetWord.toUpperCase();

    // Build color grid
    const gridEl = document.getElementById('emoji-grid');
    gridEl.innerHTML = '';
    guesses.forEach(guess => {
        const statuses = getLetterStatuses(guess, targetWord);
        const rowDiv = document.createElement('div');
        rowDiv.className = 'grid-row-summary';
        statuses.forEach(s => {
            const cell = document.createElement('span');
            cell.className = 'grid-cell ' + s;
            rowDiv.appendChild(cell);
        });
        gridEl.appendChild(rowDiv);
    });

    saveGame(won);
    showScreen('summary-screen');
}

function saveGame(won) {
    const payload = {
        word: targetWord,
        won: won,
        attempts: guesses.length,
        guesses: guesses.map((g, i) => ({ guess_number: i + 1, word: g }))
    };
    fetch('{% url "wordle_save" %}', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
            'X-CSRFToken': '{{ csrf_token }}'
        },
        body: JSON.stringify(payload)
    });
}

function startGame() {
    currentRow = 0;
    currentCol = 0;
    gameOver = false;
    guesses = [];
    keyStatus = {};
    buildBoard();
    buildKeyboard();
    showScreen('game-screen');

    fetch('{% url "wordle_word" %}')
        .then(r => r.json())
        .then(data => { targetWord = data.word; });
}

// Physical keyboard support
document.addEventListener('keydown', function(e) {
    if (!document.getElementById('game-screen').classList.contains('active')) return;
    if (e.ctrlKey || e.metaKey || e.altKey) return;
    if (e.key === 'Enter') {
        e.preventDefault();
        handleKey('Enter');
    } else if (e.key === 'Backspace') {
        e.preventDefault();
        handleKey('âŒ«');
    } else if (/^[a-zA-Z]$/.test(e.key)) {
        handleKey(e.key.toLowerCase());
    }
});
</script>
{% endblock %}
